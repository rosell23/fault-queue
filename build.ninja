cc = c99
ar = ar
cflags = -Wall -O2 -fPIC
arflags = rcs
srcdir = src
builddir = builddir
libname = libfq.a

rule cc
    command = $cc $cflags -c $in -o $out -Iinclude/
    description = CC $in -> $out

rule ar
    command = $ar $arflags $out $in
    description = AR -> $out

rule dir
    command = mkdir -p $out
    description = MKDIR $out

objects = $builddir/queue.o

build $builddir/queue.o: cc $srcdir/queue.c | $builddir/
build $builddir/: dir

build $libname: ar $objects

